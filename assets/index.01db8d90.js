var B=Object.defineProperty;var D=(t,e,n)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>(D(t,typeof e!="symbol"?e+"":e,n),n);const T=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}};T();var M={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;","`":"&#96;"},H=new RegExp(Object.keys(M).join("|"),"g");function I(t){return t===void 0&&(t=""),String(t).replace(H,function(e){return M[e]})}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.raw.reduce(function(o,r,c){var i=e[c-1];return Array.isArray(i)?i=i.join(""):t.raw[c-1]&&t.raw[c-1].endsWith("$")?o=o.slice(0,-1):i=I(i),o+i+r})}class w{constructor(e){A(this,"steps",[]);this.state=e}check(e,n){return this.state[e].length!==0&&(this.state[n].length===0||this.get(e)<this.get(n))}move(e,n){if(!this.check(e,n))throw new Error(`invalid move ${JSON.stringify(this.state)} ${e} ${n}`);this.state[n].unshift(this.state[e].shift()),this.steps.push([e,n])}get(e){return this.state[e][0]}}function J(t,e){function n(s,l){var u;return(u=Object.entries(s).find(([f,a])=>a.includes(l)))==null?void 0:u[0]}function o(s,l,u,f){const a=new w(s);return a.get(l)===f&&a.check(l,u)}function r(s,l){const u=new w(JSON.parse(JSON.stringify(s)));return l.forEach(f=>u.move(...f)),u.state}function c(s,l){return["a","b","c"].find(f=>f!==s&&f!==l)}function i(s,l,u,f,a){if(l===u){const b=n(s,a-1);return i(s,b,u,c(b,u),a-1)}if(a===0)return[];if(o(s,l,u,a))return[[l,u]];const E=[...s[l],...s[u]].sort((b,P)=>b-P),L=E[E.indexOf(a)-1],O=n(s,L),x=i(s,O,f,c(O,f),L);let y=r(s,x);const k=i(y,l,u,f,a);y=r(y,k);const q=n(y,a-1),C=i(y,q,u,c(q,u),a-1);return[...x,...k,...C]}const m=Object.values(t).flat().length,g=n(t,m);return i(t,g,e,c(g,e),m)}function R(t,e,n,o){function r(c,i,m,g){return c===1?[[i,m]]:r(c-1,i,g,m).concat(r(1,i,m,g)).concat(r(c-1,g,m,i))}return r(t,e,n,o)}function N(t){return new Promise(e=>{if(typeof t=="number")setTimeout(e,t);else if(typeof t=="function"){let n=setInterval(()=>{t()&&(clearInterval(n),e())},100)}else e()})}var F;(function(t){t.Filter="filter",t.Map="map",t.ForEach="forEach",t.Reduce="reduce",t.FlatMap="flatMap"})(F||(F={}));let j=6;function _(t,e){const n=["a","b","c"],o=n.map(r=>t[r][0]);return n[o.indexOf(e)]}function G(t,e){return["a","b","c"].find(o=>o!==t&&o!==e)}const K=document.querySelector("#app");let h=new w({a:Array(j).fill(0).map((t,e)=>e+1),b:[],c:[]});function W(t){return v`${["a","b","c"].map(e=>v`<ul class="list ${e}" data-operator="${e}">
      ${t[e].map(n=>v`<li style="width: ${(100-10*(j-n)).toString()}%">
            ${n.toString()}
          </li>`)}
    </ul>`)}`}let d=null;function z(t){d=t,document.querySelector(`.${t}`).classList.add("selected")}function Q(){!d||(document.querySelector(`.${d}`).classList.remove("selected"),d=null)}function S(t){if(!d){if(!h.get(t)){console.log("\u65E0\u6CD5\u9009\u4E2D");return}z(t);return}if(!h.check(d,t)){console.warn("\u65E0\u6CD5\u79FB\u52A8"),Q();return}h.move(d,t),d=null,$()}let p=!1;function $(){K.innerHTML=v`
    <h1>汉诺塔</h1>
    <main></main>
    <footer></footer>
    <button>自动</button>
  `,document.querySelector("main").innerHTML=W(h.state),document.querySelector("footer").textContent=`\u6B65\u6570 ${h.steps.length}`,document.querySelector("button").textContent=p?"\u6682\u505C":"\u81EA\u52A8",document.querySelector("button").addEventListener("click",async()=>{if(p){p=!1;return}p=!0;async function t(n){for(const[o,r]of n){if(console.log("form => to: ",o,r),!p)break;S(o),await N(100),S(r),await N(100)}}await t(J(h.state,"b"));const e=_(h.state,1);await t(e==="b"?[]:R(h.state[e].length,e,"b",G(e,"b"))),p=!1,$()}),document.querySelectorAll(".list").forEach(t=>t.addEventListener("click",e=>{const o=e.currentTarget.dataset.operator;console.log("move: ",d,o),S(o)}))}$();
